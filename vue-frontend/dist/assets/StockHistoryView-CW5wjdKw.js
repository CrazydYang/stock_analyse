import{d as G,a as v,r as te,G as K,y as W,c as x,e as t,i as s,w as a,b as k,f as J,g as ae,l as j,J as X,k as u,t as d,C as E,E as N,o as b,_ as q,z as Q,H as ce,I as de,D as Z,a6 as oe,j as pe,F as _e,A as ue,K as fe,P as ge,L as he,u as me}from"./index-hKubguDr.js";import{c as ve,d as be,e as we,f as ye,h as ke,g as Ce}from"./individualStockApi-WxF1uah2.js";import{i as ne}from"./index-1yOyFXf9.js";const xe={class:"balance-sheet-table"},De={class:"filter-section"},Se={key:1,class:"pagination-container"},ze={key:2,class:"loading-container"},Ie={key:3,class:"empty-container"},$e=G({__name:"BalanceSheetTable",props:{stockCode:{}},emits:["loading","error"],setup(U,{emit:_}){const C=U,c=_,h=v(!1),f=v([]),y=v(0),r=v(1),D=v(20),I=v(""),z=te({page:1,page_size:20,date:""}),w=async()=>{if(!C.stockCode){N.warning("请提供股票代码");return}h.value=!0,c("loading",!0);try{z.page=r.value,z.page_size=D.value;const e=await ve(C.stockCode,z);f.value=e.data,console.log("资产负债表数据:",e),y.value=e.data.length,e.data.length===0&&N.info("暂无资产负债表数据")}catch(e){console.error("获取资产负债表数据失败:",e);const l="获取资产负债表数据失败，请稍后重试";N.error(l),c("error",l)}finally{h.value=!1,c("loading",!1)}},P=({prop:e,order:l})=>{console.log("排序变化:",e,l)},A=e=>{D.value=e,r.value=1,w()},R=e=>{r.value=e,w()},m=e=>e==null?"-":e>=1e8?(e/1e8).toFixed(2)+"亿":e>=1e4?(e/1e4).toFixed(2)+"万":e.toString(),$=e=>e==null?"":e>0?"growth-positive":e<0?"growth-negative":"",H=()=>{},i=()=>{I.value=""};return K(()=>C.stockCode,e=>{e&&(r.value=1,w())}),W(()=>{C.stockCode&&w()}),(e,l)=>{const V=s("el-icon"),T=s("el-input"),L=s("el-col"),B=s("el-button"),p=s("el-row"),n=s("el-table-column"),S=s("el-table"),F=s("el-pagination"),O=s("el-skeleton"),M=s("el-empty"),g=s("el-card");return b(),x("div",xe,[t(g,null,{default:a(()=>[k("div",De,[t(p,{gutter:20,align:"middle"},{default:a(()=>[t(L,{span:8},{default:a(()=>[t(T,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=o=>I.value=o),placeholder:"输入报告期进行筛选（如：2023、2023-12）",clearable:"",onInput:H},{prefix:a(()=>[t(V,null,{default:a(()=>[t(j(X))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{span:4},{default:a(()=>[t(B,{onClick:i},{default:a(()=>[...l[2]||(l[2]=[u("清除筛选",-1)])]),_:1})]),_:1})]),_:1})]),!h.value&&f.value.length>0?(b(),J(S,{key:0,data:f.value,border:"",stripe:"",style:{width:"100%"},height:"500",onSortChange:P},{default:a(()=>[t(n,{prop:"report_date",label:"报告期",width:"120",sortable:""}),t(n,{prop:"monetary_funds",label:"货币资金","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.monetary_funds)),1)]),_:1}),t(n,{prop:"accounts_receivable",label:"应收账款","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.accounts_receivable)),1)]),_:1}),t(n,{prop:"inventory",label:"存货","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.inventory)),1)]),_:1}),t(n,{prop:"total_assets",label:"总资产","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.total_assets)),1)]),_:1}),t(n,{prop:"total_assets_growth_rate",label:"总资产增长率","min-width":"120",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.total_assets_growth_rate))},d(o.row.total_assets_growth_rate?o.row.total_assets_growth_rate.toFixed(2)+"%":"-"),3)]),_:1}),t(n,{prop:"accounts_payable",label:"应付账款","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.accounts_payable)),1)]),_:1}),t(n,{prop:"total_liabilities",label:"总负债","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.total_liabilities)),1)]),_:1}),t(n,{prop:"total_liabilities_growth_rate",label:"总负债增长率","min-width":"120",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.total_liabilities_growth_rate))},d(o.row.total_liabilities_growth_rate?o.row.total_liabilities_growth_rate.toFixed(2)+"%":"-"),3)]),_:1}),t(n,{prop:"debt_to_asset_ratio",label:"资产负债率","min-width":"120",sortable:""},{default:a(o=>[u(d(o.row.debt_to_asset_ratio?o.row.debt_to_asset_ratio.toFixed(2)+"%":"-"),1)]),_:1}),t(n,{prop:"total_equity",label:"股东权益","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.total_equity)),1)]),_:1}),t(n,{prop:"announcement_date",label:"公告日期",width:"120"})]),_:1},8,["data"])):ae("",!0),!h.value&&f.value.length>0?(b(),x("div",Se,[t(F,{"current-page":r.value,"onUpdate:currentPage":l[1]||(l[1]=o=>r.value=o),"page-size":D.value,total:y.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:R},null,8,["current-page","page-size","total"])])):h.value?(b(),x("div",ze,[t(O,{rows:10,animated:""})])):(b(),x("div",Ie,[t(M,{description:"暂无资产负债表数据"},{default:a(()=>[t(B,{type:"primary",onClick:w},{default:a(()=>[...l[3]||(l[3]=[u("刷新数据",-1)])]),_:1})]),_:1})]))]),_:1})])}}}),Fe=q($e,[["__scopeId","data-v-2d4da6cb"]]),Le={class:"income-statement-table"},Ve={class:"filter-section"},Pe={key:1,class:"pagination-container"},Ae={key:2,class:"loading-container"},Re={key:3,class:"empty-container"},Be=G({__name:"IncomeStatementTable",props:{stockCode:{}},emits:["loading","error"],setup(U,{emit:_}){const C=U,c=_,h=v(!1),f=v([]),y=v(0),r=v(1),D=v(20),I=v(""),z=te({page:1,page_size:20,date:""}),w=async()=>{if(!C.stockCode){N.warning("请提供股票代码");return}h.value=!0,c("loading",!0);try{z.page=r.value,z.page_size=D.value;const e=await be(C.stockCode,z);f.value=e.data,y.value=e.data.length,e.data.length===0&&N.info("暂无利润表数据")}catch(e){console.error("获取利润表数据失败:",e);const l="获取利润表数据失败，请稍后重试";N.error(l),c("error",l)}finally{h.value=!1,c("loading",!1)}},P=({prop:e,order:l})=>{console.log("排序变化:",e,l)},A=e=>{D.value=e,r.value=1,w()},R=e=>{r.value=e,w()},m=e=>e==null?"-":e>=1e8?(e/1e8).toFixed(2)+"亿":e>=1e4?(e/1e4).toFixed(2)+"万":e.toString(),$=e=>e==null?"":e>0?"growth-positive":e<0?"growth-negative":"",H=()=>{},i=()=>{I.value=""};return K(()=>C.stockCode,e=>{e&&(r.value=1,w())}),W(()=>{C.stockCode&&w()}),(e,l)=>{const V=s("el-icon"),T=s("el-input"),L=s("el-col"),B=s("el-button"),p=s("el-row"),n=s("el-table-column"),S=s("el-table"),F=s("el-pagination"),O=s("el-skeleton"),M=s("el-empty"),g=s("el-card");return b(),x("div",Le,[t(g,null,{default:a(()=>[k("div",Ve,[t(p,{gutter:20,align:"middle"},{default:a(()=>[t(L,{span:8},{default:a(()=>[t(T,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=o=>I.value=o),placeholder:"输入报告期进行筛选（如：2023、2023-12）",clearable:"",onInput:H},{prefix:a(()=>[t(V,null,{default:a(()=>[t(j(X))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{span:4},{default:a(()=>[t(B,{onClick:i},{default:a(()=>[...l[2]||(l[2]=[u("清除筛选",-1)])]),_:1})]),_:1})]),_:1})]),!h.value&&f.value.length>0?(b(),J(S,{key:0,data:f.value,border:"",stripe:"",style:{width:"100%"},height:"500",onSortChange:P},{default:a(()=>[t(n,{prop:"report_date",label:"报告期",width:"120",sortable:""}),t(n,{prop:"operating_revenue",label:"营业总收入","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.operating_revenue)),1)]),_:1}),t(n,{prop:"operating_revenue_growth_rate",label:"营业收入增长率","min-width":"130",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.operating_revenue_growth_rate))},d(o.row.operating_revenue_growth_rate?o.row.operating_revenue_growth_rate.toFixed(2)+"%":"-"),3)]),_:1}),t(n,{prop:"total_operating_expenses",label:"营业总成本","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.total_operating_expenses)),1)]),_:1}),t(n,{prop:"operating_expenses",label:"营业费用","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.operating_expenses)),1)]),_:1}),t(n,{prop:"sales_expenses",label:"销售费用","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.sales_expenses)),1)]),_:1}),t(n,{prop:"management_expenses",label:"管理费用","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.management_expenses)),1)]),_:1}),t(n,{prop:"financial_expenses",label:"财务费用","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.financial_expenses)),1)]),_:1}),t(n,{prop:"operating_profit",label:"营业利润","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.operating_profit)),1)]),_:1}),t(n,{prop:"total_profit",label:"利润总额","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.total_profit)),1)]),_:1}),t(n,{prop:"net_profit",label:"净利润","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.net_profit)),1)]),_:1}),t(n,{prop:"net_profit_growth_rate",label:"净利润增长率","min-width":"120",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.net_profit_growth_rate))},d(o.row.net_profit_growth_rate?o.row.net_profit_growth_rate.toFixed(2)+"%":"-"),3)]),_:1}),t(n,{prop:"announcement_date",label:"公告日期",width:"120"})]),_:1},8,["data"])):ae("",!0),!h.value&&f.value.length>0?(b(),x("div",Pe,[t(F,{"current-page":r.value,"onUpdate:currentPage":l[1]||(l[1]=o=>r.value=o),"page-size":D.value,total:y.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:R},null,8,["current-page","page-size","total"])])):h.value?(b(),x("div",Ae,[t(O,{rows:10,animated:""})])):(b(),x("div",Re,[t(M,{description:"暂无利润表数据"},{default:a(()=>[t(B,{type:"primary",onClick:w},{default:a(()=>[...l[3]||(l[3]=[u("刷新数据",-1)])]),_:1})]),_:1})]))]),_:1})])}}}),Ee=q(Be,[["__scopeId","data-v-fbfffdc4"]]),Te={class:"cash-flow-statement-table"},Ue={class:"filter-section"},He={key:1,class:"pagination-container"},Me={key:2,class:"loading-container"},Ne={key:3,class:"empty-container"},Oe=G({__name:"CashFlowStatementTable",props:{stockCode:{}},emits:["loading","error"],setup(U,{emit:_}){const C=U,c=_,h=v(!1),f=v([]),y=v(0),r=v(1),D=v(20),I=v(""),z=te({page:1,page_size:20,date:""}),w=async()=>{if(!C.stockCode){N.warning("请提供股票代码");return}h.value=!0,c("loading",!0);try{z.page=r.value,z.page_size=D.value;const e=await we(C.stockCode,z);f.value=e.data,y.value=e.data.length,e.data.length===0&&N.info("暂无现金流量表数据")}catch(e){console.error("获取现金流量表数据失败:",e);const l="获取现金流量表数据失败，请稍后重试";N.error(l),c("error",l)}finally{h.value=!1,c("loading",!1)}},P=({prop:e,order:l})=>{console.log("排序变化:",e,l)},A=e=>{D.value=e,r.value=1,w()},R=e=>{r.value=e,w()},m=e=>e==null?"-":Math.abs(e)>=1e8?(e/1e8).toFixed(2)+"亿":Math.abs(e)>=1e4?(e/1e4).toFixed(2)+"万":e.toString(),$=e=>e==null?"":e>0?"cash-flow-positive":e<0?"cash-flow-negative":"",H=()=>{},i=()=>{I.value=""};return K(()=>C.stockCode,e=>{e&&(r.value=1,w())}),W(()=>{C.stockCode&&w()}),(e,l)=>{const V=s("el-icon"),T=s("el-input"),L=s("el-col"),B=s("el-button"),p=s("el-row"),n=s("el-table-column"),S=s("el-table"),F=s("el-pagination"),O=s("el-skeleton"),M=s("el-empty"),g=s("el-card");return b(),x("div",Te,[t(g,null,{default:a(()=>[k("div",Ue,[t(p,{gutter:20,align:"middle"},{default:a(()=>[t(L,{span:8},{default:a(()=>[t(T,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=o=>I.value=o),placeholder:"输入报告期进行筛选（如：2023、2023-12）",clearable:"",onInput:H},{prefix:a(()=>[t(V,null,{default:a(()=>[t(j(X))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{span:4},{default:a(()=>[t(B,{onClick:i},{default:a(()=>[...l[2]||(l[2]=[u("清除筛选",-1)])]),_:1})]),_:1})]),_:1})]),!h.value&&f.value.length>0?(b(),J(S,{key:0,data:f.value,border:"",stripe:"",style:{width:"100%"},height:"500",onSortChange:P},{default:a(()=>[t(n,{prop:"report_date",label:"报告期",width:"120",sortable:""}),t(n,{prop:"operating_cash_flow",label:"经营活动现金流量净额","min-width":"160",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.operating_cash_flow))},d(m(o.row.operating_cash_flow)),3)]),_:1}),t(n,{prop:"investing_cash_flow",label:"投资活动现金流量净额","min-width":"160",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.investing_cash_flow))},d(m(o.row.investing_cash_flow)),3)]),_:1}),t(n,{prop:"financing_cash_flow",label:"筹资活动现金流量净额","min-width":"160",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.financing_cash_flow))},d(m(o.row.financing_cash_flow)),3)]),_:1}),t(n,{prop:"net_cash_flow",label:"现金及现金等价物净增加额","min-width":"180",sortable:""},{default:a(o=>[k("span",{class:E($(o.row.net_cash_flow))},d(m(o.row.net_cash_flow)),3)]),_:1}),t(n,{prop:"cash_received_from_sales",label:"销售商品、提供劳务收到的现金","min-width":"200",sortable:""},{default:a(o=>[u(d(m(o.row.cash_received_from_sales)),1)]),_:1}),t(n,{prop:"cash_paid_for_goods",label:"购买商品、接受劳务支付的现金","min-width":"200",sortable:""},{default:a(o=>[u(d(m(o.row.cash_paid_for_goods)),1)]),_:1}),t(n,{prop:"cash_paid_to_employees",label:"支付给职工以及为职工支付的现金","min-width":"200",sortable:""},{default:a(o=>[u(d(m(o.row.cash_paid_to_employees)),1)]),_:1}),t(n,{prop:"taxes_paid",label:"支付的各项税费","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.taxes_paid)),1)]),_:1}),t(n,{prop:"cash_from_investments",label:"收回投资收到的现金","min-width":"140",sortable:""},{default:a(o=>[u(d(m(o.row.cash_from_investments)),1)]),_:1}),t(n,{prop:"cash_for_investments",label:"投资支付的现金","min-width":"120",sortable:""},{default:a(o=>[u(d(m(o.row.cash_for_investments)),1)]),_:1}),t(n,{prop:"cash_from_financing",label:"取得借款收到的现金","min-width":"140",sortable:""},{default:a(o=>[u(d(m(o.row.cash_from_financing)),1)]),_:1}),t(n,{prop:"cash_for_debt_repayment",label:"偿还债务支付的现金","min-width":"140",sortable:""},{default:a(o=>[u(d(m(o.row.cash_for_debt_repayment)),1)]),_:1}),t(n,{prop:"announcement_date",label:"公告日期",width:"120"})]),_:1},8,["data"])):ae("",!0),!h.value&&f.value.length>0?(b(),x("div",He,[t(F,{"current-page":r.value,"onUpdate:currentPage":l[1]||(l[1]=o=>r.value=o),"page-size":D.value,total:y.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:R},null,8,["current-page","page-size","total"])])):h.value?(b(),x("div",Me,[t(O,{rows:10,animated:""})])):(b(),x("div",Ne,[t(M,{description:"暂无现金流量表数据"},{default:a(()=>[t(B,{type:"primary",onClick:w},{default:a(()=>[...l[3]||(l[3]=[u("刷新数据",-1)])]),_:1})]),_:1})]))]),_:1})])}}}),Ye=q(Oe,[["__scopeId","data-v-4cbf1178"]]),je={class:"history-data-table"},Ge={key:0,class:"table-container"},qe={class:"pagination-container"},Ke={key:1,class:"empty-container"},Ze=G({__name:"HistoryDataTable",props:{historyData:{}},emits:["refresh","sort-change"],setup(U,{expose:_,emit:C}){const c=U,h=C,f=v("date"),y=v("desc"),r=v(1),D=v(20),I=Q(()=>c.historyData.length?[...c.historyData].sort((i,e)=>{const l=i[f.value],V=e[f.value];if(typeof l=="string"&&typeof V=="string")return y.value==="asc"?l.localeCompare(V):V.localeCompare(l);{const T=l==null?-1/0:Number(l),L=V==null?-1/0:Number(V);return y.value==="asc"?T-L:L-T}}):[]),z=Q(()=>{const i=(r.value-1)*D.value,e=i+D.value;return I.value.slice(i,e)}),w=({prop:i,order:e})=>{f.value=i||"date",y.value=e==="ascending"?"asc":"desc",h("sort-change",{prop:i,order:e})},P=i=>{D.value=i,r.value=1},A=i=>{r.value=i},R=()=>{h("refresh")},m=i=>i>0?"price-up":i<0?"price-down":"price-unchanged",$=i=>i==null?"-":i>=1e8?(i/1e8).toFixed(2)+"亿手":i>=1e4?(i/1e4).toFixed(2)+"万手":i.toString()+"手",H=i=>i==null?"-":i>=1e8?(i/1e8).toFixed(2)+"亿":i>=1e4?(i/1e4).toFixed(2)+"万":i.toString();return _({resetPagination:()=>{r.value=1}}),(i,e)=>{const l=s("el-table-column"),V=s("el-table"),T=s("el-pagination"),L=s("el-button"),B=s("el-empty");return b(),x("div",je,[i.historyData.length>0?(b(),x("div",Ge,[t(V,{data:z.value,border:"",stripe:"",style:{width:"100%","max-width":"100%"},height:"400",onSortChange:w},{default:a(()=>[t(l,{prop:"date",label:"日期",width:"120",sortable:""}),t(l,{prop:"open_price",label:"开盘价","min-width":"100",sortable:""}),t(l,{prop:"high_price",label:"最高价","min-width":"100",sortable:""}),t(l,{prop:"low_price",label:"最低价","min-width":"100",sortable:""}),t(l,{prop:"close_price",label:"收盘价","min-width":"100",sortable:""}),t(l,{prop:"change_percent",label:"涨跌幅","min-width":"100",sortable:""},{default:a(p=>[k("span",{class:E(m(p.row.change_percent))},d(p.row.change_percent>0?"+":"")+d(p.row.change_percent.toFixed(2))+"% ",3)]),_:1}),t(l,{prop:"volume",label:"成交量","min-width":"120",sortable:""},{default:a(p=>[u(d($(p.row.volume)),1)]),_:1}),t(l,{prop:"amount",label:"成交额","min-width":"120",sortable:""},{default:a(p=>[u(d(H(p.row.amount)),1)]),_:1}),t(l,{prop:"turnover_rate",label:"换手率","min-width":"100",sortable:""},{default:a(p=>[u(d(p.row.turnover_rate?p.row.turnover_rate.toFixed(2)+"%":"-"),1)]),_:1})]),_:1},8,["data"]),k("div",qe,[t(T,{"current-page":r.value,"onUpdate:currentPage":e[0]||(e[0]=p=>r.value=p),"page-size":D.value,total:i.historyData.length,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:A},null,8,["current-page","page-size","total"])])])):(b(),x("div",Ke,[t(B,{description:"暂无历史行情数据"},{default:a(()=>[t(L,{type:"primary",onClick:R},{default:a(()=>[...e[1]||(e[1]=[u("查询数据",-1)])]),_:1})]),_:1})]))])}}}),Je=q(Ze,[["__scopeId","data-v-1afb5bc5"]]),Qe={class:"performance-data-table"},We={class:"filter-section"},Xe={key:1,class:"text-gray-400"},et={class:"pagination-container"},tt=G({__name:"PerformanceDataTable",props:{performanceData:{},loading:{type:Boolean,default:!1}},emits:["refresh","sort-change"],setup(U,{emit:_}){const C=U,c=_,h=v(1),f=v(20),y=v(""),r=Q(()=>{if(!y.value)return C.performanceData;const e=y.value.toLowerCase().trim();return C.performanceData.filter(l=>l.report_date.toLowerCase().includes(e))}),D=Q(()=>{const e=(h.value-1)*f.value,l=e+f.value;return r.value.slice(e,l)}),I=()=>{h.value=1},z=()=>{y.value="",h.value=1},w=({prop:e,order:l})=>{c("sort-change",{prop:e,order:l})},P=e=>{f.value=e,h.value=1},A=e=>{h.value=e},R=e=>e?e.includes("-")?e:e.length===8?`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`:e:"--",m=(e,l=2)=>e==null?"--":e.toFixed(l),$=e=>e==null?"--":`${e.toFixed(2)}%`,H=e=>e==null?"--":(e/1e8).toFixed(2),i=e=>e==null||e===0?"":e>0?"text-red-500":"text-green-500";return(e,l)=>{const V=s("el-icon"),T=s("el-input"),L=s("el-col"),B=s("el-button"),p=s("el-row"),n=s("el-table-column"),S=s("el-table"),F=s("el-pagination"),O=s("el-empty"),M=de("loading");return b(),x("div",Qe,[k("div",We,[t(p,{gutter:20,align:"middle"},{default:a(()=>[t(L,{span:8},{default:a(()=>[t(T,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=g=>y.value=g),placeholder:"输入报告期进行筛选（如：2023、2023-12）",clearable:"",onInput:I},{prefix:a(()=>[t(V,null,{default:a(()=>[t(j(X))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{span:4},{default:a(()=>[t(B,{onClick:z},{default:a(()=>[...l[3]||(l[3]=[u("清除筛选",-1)])]),_:1})]),_:1})]),_:1})]),ce((b(),J(S,{data:D.value,stripe:"",border:"",height:"600",onSortChange:w},{default:a(()=>[t(n,{prop:"report_date",label:"报告期",width:"120",sortable:"custom"},{default:a(({row:g})=>[u(d(R(g.report_date)),1)]),_:1}),t(n,{prop:"earnings_per_share",label:"每股收益(元)",width:"120",sortable:"custom",align:"right"},{default:a(({row:g})=>[k("span",{class:E(i(g.earnings_per_share))},d(m(g.earnings_per_share,4)),3)]),_:1}),t(n,{prop:"operating_revenue",label:"营业收入(亿元)",width:"140",sortable:"custom",align:"right"},{default:a(({row:g})=>[u(d(H(g.operating_revenue)),1)]),_:1}),t(n,{prop:"operating_revenue_growth_rate",label:"营收增长率(%)",width:"140",sortable:"custom",align:"right"},{default:a(({row:g})=>[k("span",{class:E(i(g.operating_revenue_growth_rate))},d($(g.operating_revenue_growth_rate)),3)]),_:1}),t(n,{prop:"net_profit",label:"净利润(亿元)",width:"140",sortable:"custom",align:"right"},{default:a(({row:g})=>[k("span",{class:E(i(g.net_profit))},d(H(g.net_profit)),3)]),_:1}),t(n,{prop:"net_profit_growth_rate",label:"净利润增长率(%)",width:"150",sortable:"custom",align:"right"},{default:a(({row:g})=>[k("span",{class:E(i(g.net_profit_growth_rate))},d($(g.net_profit_growth_rate)),3)]),_:1}),t(n,{prop:"net_assets_per_share",label:"每股净资产(元)",width:"140",sortable:"custom",align:"right"},{default:a(({row:g})=>[u(d(m(g.net_assets_per_share,4)),1)]),_:1}),t(n,{prop:"roe",label:"净资产收益率(%)",width:"150",sortable:"custom",align:"right"},{default:a(({row:g})=>[k("span",{class:E(i(g.roe))},d($(g.roe)),3)]),_:1}),t(n,{prop:"operating_cash_flow_per_share",label:"每股经营现金流(元)",width:"170",sortable:"custom",align:"right"},{default:a(({row:g})=>[k("span",{class:E(i(g.operating_cash_flow_per_share))},d(m(g.operating_cash_flow_per_share,4)),3)]),_:1}),t(n,{prop:"gross_profit_margin",label:"毛利率(%)",width:"120",sortable:"custom",align:"right"},{default:a(({row:g})=>[g.gross_profit_margin!==null?(b(),x("span",{key:0,class:E(i(g.gross_profit_margin))},d($(g.gross_profit_margin)),3)):(b(),x("span",Xe,"--"))]),_:1}),t(n,{prop:"announcement_date",label:"公告日期",width:"120"},{default:a(({row:g})=>[u(d(R(g.announcement_date)),1)]),_:1})]),_:1},8,["data"])),[[M,e.loading]]),k("div",et,[t(F,{"current-page":h.value,"onUpdate:currentPage":l[1]||(l[1]=g=>h.value=g),"page-size":f.value,"onUpdate:pageSize":l[2]||(l[2]=g=>f.value=g),"page-sizes":[10,20,50,100],total:r.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:A},null,8,["current-page","page-size","total"])]),!e.loading&&r.value.length===0?(b(),J(O,{key:0,description:y.value?"未找到匹配的业绩数据":"暂无业绩数据"},null,8,["description"])):ae("",!0)])}}}),at=q(tt,[["__scopeId","data-v-3dd3a3b7"]]),ot={class:"stock-chart-container"},nt={key:0,class:"chart-wrapper"},lt={key:1,class:"loading-container"},rt={key:2,class:"empty-container"},st=G({__name:"StockChart",props:{historyData:{},stockInfo:{},loading:{type:Boolean,default:!1}},setup(U){const _=U,C=v(null);let c=null;const h=()=>{if(console.log("StockChart initChart called",{hasChartRef:!!C.value,dataLength:_.historyData.length,stockInfo:_.stockInfo,loading:_.loading}),!C.value||!_.historyData.length){console.log("StockChart initChart early return",{hasChartRef:!!C.value,dataLength:_.historyData.length});return}c&&c.dispose(),c=ne(C.value),console.log("StockChart chart instance created",c);const f={title:{text:`${_.stockInfo.name} (${_.stockInfo.code}) 历史K线图`,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["K线","成交量"],bottom:10},grid:[{id:"main",left:"10%",right:"10%",height:"60%",top:"10%"},{id:"volume",left:"10%",right:"10%",top:"75%",height:"15%"}],xAxis:[{type:"category",data:_.historyData.map(r=>r.date),scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},splitNumber:20,gridIndex:0},{type:"category",data:_.historyData.map(r=>r.date),scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},gridIndex:1,axisLabel:{show:!1}}],yAxis:[{type:"value",scale:!0,splitLine:{show:!0},position:"right",name:"价格",nameLocation:"middle",nameGap:30,gridIndex:0},{type:"value",scale:!0,splitLine:{show:!1},name:"成交量",nameLocation:"middle",nameGap:15,gridIndex:1}],dataZoom:[{type:"inside",start:0,end:100,xAxisIndex:[0,1]},{show:!0,type:"slider",bottom:5,start:0,end:100,xAxisIndex:[0,1]}],series:[{name:"K线",type:"candlestick",xAxisIndex:0,yAxisIndex:0,data:_.historyData.map(r=>[r.open_price,r.close_price,r.low_price,r.high_price]),itemStyle:{color:"#f56c6c",color0:"#67c23a",borderColor:"#f56c6c",borderColor0:"#67c23a"}},{name:"成交量",type:"bar",xAxisIndex:1,yAxisIndex:1,data:_.historyData.map(r=>r.volume),itemStyle:{color:function(r){const D=r.dataIndex,I=_.historyData[D];return I.close_price>I.open_price?"#f56c6c":"#67c23a"}}}]};console.log("StockChart option prepared",f),c.setOption(f),console.log("StockChart setOption completed");const y=()=>{c?.resize()};window.addEventListener("resize",y)};return K(()=>[_.historyData,_.stockInfo,_.loading],async()=>{console.log("StockChart watch triggered",{loading:_.loading,dataLength:_.historyData.length,stockInfo:_.stockInfo}),!_.loading&&_.historyData.length>0?(await Z(),h()):c&&c.clear()},{deep:!0,immediate:!0}),W(async()=>{console.log("StockChart onMounted",{loading:_.loading,dataLength:_.historyData.length}),!_.loading&&_.historyData.length>0&&(await Z(),h())}),oe(()=>{c&&(c.dispose(),c=null),window.removeEventListener("resize",()=>{c?.resize()})}),(f,y)=>{const r=s("el-skeleton"),D=s("el-empty");return b(),x("div",ot,[!f.loading&&f.historyData.length>0?(b(),x("div",nt,[k("div",{ref_key:"chartRef",ref:C,class:"stock-chart"},null,512)])):f.loading?(b(),x("div",lt,[t(r,{rows:8,animated:""})])):(b(),x("div",rt,[t(D,{description:"暂无历史行情数据"})]))])}}}),it=q(st,[["__scopeId","data-v-8daccfac"]]),ct={class:"performance-chart-container"},dt={class:"filter-section"},pt={key:0,class:"chart-wrapper"},_t={key:1,class:"loading-container"},ut={key:2,class:"empty-container"},ft=G({__name:"PerformanceChart",props:{performanceData:{},stockInfo:{},loading:{type:Boolean,default:!1}},setup(U){const _=U,C=v(null);let c=null;const h=v(""),f=Q(()=>{if(!h.value)return _.performanceData;const z=h.value.toLowerCase().trim();return _.performanceData.filter(w=>w.report_date.toLowerCase().includes(z))}),y=()=>h.value&&_.performanceData.length>0?"未找到匹配的业绩数据":"暂无业绩数据",r=()=>{f.value.length>0?Z(()=>{I()}):c&&c.clear()},D=()=>{h.value=""},I=()=>{if(!C.value||!f.value.length)return;c&&c.dispose(),c=ne(C.value);const z=[...f.value].sort((i,e)=>i.report_date.localeCompare(e.report_date)),w=z.map(i=>i.report_date),P=z.map(i=>i.operating_revenue/1e8),A=z.map(i=>i.net_profit/1e8),R=z.map(i=>i.earnings_per_share),m=z.map(i=>i.roe),$={title:{text:`${_.stockInfo.name} (${_.stockInfo.code}) 业绩数据趋势`,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["营业收入(亿元)","净利润(亿元)","每股收益(元)","ROE(%)"],top:40},grid:{left:"10%",right:"10%",top:"20%",bottom:"10%"},xAxis:{type:"category",data:w,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"金额(亿元)",position:"left",axisLabel:{formatter:"{value}"}},{type:"value",name:"比率",position:"right",axisLabel:{formatter:"{value}"}}],series:[{name:"营业收入(亿元)",type:"line",yAxisIndex:0,data:P,smooth:!0,itemStyle:{color:"#409EFF"}},{name:"净利润(亿元)",type:"line",yAxisIndex:0,data:A,smooth:!0,itemStyle:{color:"#67C23A"}},{name:"每股收益(元)",type:"line",yAxisIndex:1,data:R,smooth:!0,itemStyle:{color:"#E6A23C"}},{name:"ROE(%)",type:"line",yAxisIndex:1,data:m,smooth:!0,itemStyle:{color:"#F56C6C"}}]};c.setOption($);const H=()=>{c?.resize()};window.addEventListener("resize",H)};return K(()=>[_.performanceData,_.stockInfo],async()=>{!_.loading&&f.value.length>0?(await Z(),I()):c&&c.clear()},{deep:!0}),K(()=>f.value,async()=>{!_.loading&&f.value.length>0?(await Z(),I()):c&&c.clear()},{deep:!0}),W(async()=>{!_.loading&&f.value.length>0&&(await Z(),I())}),oe(()=>{c&&(c.dispose(),c=null),window.removeEventListener("resize",()=>{c?.resize()})}),(z,w)=>{const P=s("el-input"),A=s("el-button"),R=s("el-skeleton"),m=s("el-empty");return b(),x("div",ct,[k("div",dt,[t(P,{modelValue:h.value,"onUpdate:modelValue":w[0]||(w[0]=$=>h.value=$),placeholder:"筛选报告期 (如: 2023, 2023-12)",clearable:"","prefix-icon":j(X),onInput:r,style:{width:"300px","margin-right":"10px"}},null,8,["modelValue","prefix-icon"]),t(A,{onClick:D},{default:a(()=>[...w[1]||(w[1]=[u("清除筛选",-1)])]),_:1})]),!z.loading&&f.value.length>0?(b(),x("div",pt,[w[2]||(w[2]=k("h3",null,"业绩数据趋势",-1)),k("div",{ref_key:"performanceChartRef",ref:C,class:"performance-chart"},null,512)])):z.loading?(b(),x("div",_t,[t(R,{rows:6,animated:""})])):(b(),x("div",ut,[t(m,{description:y()},null,8,["description"])]))])}}}),gt=q(ft,[["__scopeId","data-v-72c8fdbb"]]),ht={class:"stock-history-view"},mt={class:"header-content"},vt={class:"stock-info"},bt={class:"stock-code"},wt={key:0},yt={class:"header-actions"},kt={class:"query-section"},Ct={class:"chart-container"},xt={class:"chart-container"},Dt={key:0,class:"data-container"},St={key:1,class:"loading-container"},zt={key:2,class:"empty-container"},It=G({__name:"StockHistoryView",setup(U){const _=pe(),C=me(),c=v(!1),h=v(!1),f=v(!1),y=te({code:"",name:"",industry:"",total_shares:0,circulating_shares:0,list_date:"",pe_ratio:0,pb_ratio:0,total_market_cap:0,circulating_market_cap:0,created_at:"",updated_at:"",latest_price:0,change_percent:0,change_amount:0,volume:0,amount:0,amplitude:0,high:0,low:0,open_price:0,close_price:0,volume_ratio:0,turnover_rate:0,price_change_speed:0,change_5min:0,change_60d:0,change_ytd:0}),r=te({code:_.params.code||"",dateRange:[]}),D=v([]),I=v([]),z=v([]),w=v("date"),P=v("desc"),A=v("history"),R=v(!1);Q(()=>D.value.length?[...D.value].sort((p,n)=>{const S=p[w.value],F=n[w.value];if(typeof S=="string"&&typeof F=="string")return P.value==="asc"?S.localeCompare(F):F.localeCompare(S);{const O=S==null?-1/0:Number(S),M=F==null?-1/0:Number(F);return P.value==="asc"?O-M:M-O}}):[]);const m=()=>{C.back()},$=async()=>{if(!r.code){N.warning("请选择股票");return}c.value=!0;try{const p=r.dateRange[0]||"",n=r.dateRange[1]||"";console.log("StockHistoryView fetchHistoryData called",{code:r.code,startDate:p,endDate:n});const S=await ye(r.code,{start_date:p,end_date:n,adjust:""});if(console.log("StockHistoryView getStockHistory response",{responseLength:S?.length,firstItem:S?.[0]}),D.value=S,S&&S.length>0){const F=S[0];y.code=r.code,y.name=F.stock_name||"",console.log("StockHistoryView stockInfo updated",y)}await H(),N.success("历史行情数据加载成功")}catch(p){console.error("获取历史行情数据失败:",p),N.error("获取历史行情数据失败，请稍后重试")}finally{c.value=!1}},H=async()=>{if(r.code){f.value=!0;try{const p=await ke(r.code,{page:1,page_size:20});I.value=p.reports.sort((n,S)=>S.report_date.localeCompare(n.report_date)),console.log("业绩数据加载成功:",I.value.length,"条记录")}catch(p){console.error("获取业绩数据失败:",p)}finally{f.value=!1}}},i=async p=>{if(!(p.length<2)){h.value=!0;try{const S=(await Ce()).data;z.value=S.filter(F=>F.code.includes(p)||F.name.includes(p)).slice(0,20)}catch(n){console.error("搜索股票失败:",n)}finally{h.value=!1}}},e=p=>{r.code=p,C.push(`/stock-history/${p}`)},l=()=>{$()},V=()=>{r.dateRange=[]},T=({prop:p,order:n})=>{w.value=p||"date",P.value=n==="ascending"?"asc":"desc"},L=p=>{R.value=p},B=p=>{N.error(p)};return K(()=>_.params.code,p=>{p&&typeof p=="string"&&(r.code=p,$())}),W(()=>{const p=new Date,n=new Date;n.setDate(n.getDate()-30),r.dateRange=[n.toISOString().split("T")[0].replace(/-/g,""),p.toISOString().split("T")[0].replace(/-/g,"")],r.code&&$()}),(p,n)=>{const S=s("el-button"),F=s("el-option"),O=s("el-select"),M=s("el-form-item"),g=s("el-date-picker"),o=s("el-form"),ee=s("el-tab-pane"),le=s("el-tabs"),re=s("el-skeleton"),se=s("el-empty"),ie=s("el-card");return b(),x("div",ht,[t(ie,{class:"page-header"},{header:a(()=>[k("div",mt,[k("div",vt,[k("h2",null,[u(d(y.name)+" ",1),k("span",bt,d(y.code),1)]),y.industry?(b(),x("p",wt,d(y.industry),1)):ae("",!0)]),k("div",yt,[t(S,{type:"primary",icon:j(ge),onClick:m},{default:a(()=>[...n[3]||(n[3]=[u("返回",-1)])]),_:1},8,["icon"]),t(S,{type:"success",icon:j(he),onClick:$,loading:c.value},{default:a(()=>[...n[4]||(n[4]=[u(" 刷新数据 ",-1)])]),_:1},8,["icon","loading"])])])]),default:a(()=>[k("div",kt,[t(o,{inline:!0,model:r},{default:a(()=>[t(M,{label:"股票代码"},{default:a(()=>[t(O,{modelValue:r.code,"onUpdate:modelValue":n[0]||(n[0]=Y=>r.code=Y),filterable:"",remote:"",placeholder:"请输入股票代码或名称","remote-method":i,loading:h.value,onChange:e},{default:a(()=>[(b(!0),x(_e,null,ue(z.value,Y=>(b(),J(F,{key:Y.code,label:`${Y.name} (${Y.code})`,value:Y.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),t(M,{label:"日期范围"},{default:a(()=>[t(g,{modelValue:r.dateRange,"onUpdate:modelValue":n[1]||(n[1]=Y=>r.dateRange=Y),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYYMMDD"},null,8,["modelValue"])]),_:1}),t(M,null,{default:a(()=>[t(S,{type:"primary",icon:j(X),onClick:l},{default:a(()=>[...n[5]||(n[5]=[u("查询",-1)])]),_:1},8,["icon"]),t(S,{icon:j(fe),onClick:V},{default:a(()=>[...n[6]||(n[6]=[u("重置",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),k("div",Ct,[t(it,{"history-data":D.value,"stock-info":y,loading:c.value},null,8,["history-data","stock-info","loading"])]),k("div",xt,[t(gt,{"performance-data":I.value,"stock-info":y,loading:f.value},null,8,["performance-data","stock-info","loading"])]),!c.value&&(D.value.length>0||r.code)?(b(),x("div",Dt,[t(le,{modelValue:A.value,"onUpdate:modelValue":n[2]||(n[2]=Y=>A.value=Y),type:"card",class:"data-tabs"},{default:a(()=>[t(ee,{label:"历史行情",name:"history"},{default:a(()=>[t(Je,{"history-data":D.value,onRefresh:l,onSortChange:T},null,8,["history-data"])]),_:1}),t(ee,{label:"业绩数据",name:"performance"},{default:a(()=>[t(at,{"performance-data":I.value,loading:f.value,onRefresh:l,onSortChange:T},null,8,["performance-data","loading"])]),_:1}),t(ee,{label:"资产负债表",name:"balance-sheet"},{default:a(()=>[t(Fe,{"stock-code":r.code,onLoading:L,onError:B},null,8,["stock-code"])]),_:1}),t(ee,{label:"利润表",name:"income-statement"},{default:a(()=>[t(Ee,{"stock-code":r.code,onLoading:L,onError:B},null,8,["stock-code"])]),_:1}),t(ee,{label:"现金流量表",name:"cash-flow-statement"},{default:a(()=>[t(Ye,{"stock-code":r.code,onLoading:L,onError:B},null,8,["stock-code"])]),_:1})]),_:1},8,["modelValue"])])):c.value?(b(),x("div",St,[t(re,{rows:10,animated:""})])):(b(),x("div",zt,[t(se,{description:"暂无历史行情数据"},{default:a(()=>[t(S,{type:"primary",onClick:l},{default:a(()=>[...n[7]||(n[7]=[u("查询数据",-1)])]),_:1})]),_:1})]))]),_:1})])}}}),Vt=q(It,[["__scopeId","data-v-abf44f8d"]]);export{Vt as default};
