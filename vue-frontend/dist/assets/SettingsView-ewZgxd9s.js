import{d as B,a as u,y as D,c as m,e as t,w as a,i as l,a4 as E,E as i,H as N,I as S,f as y,k as p,t as g,b as v,a5 as M,o as d,_ as T}from"./index-1owQczTB.js";const H={class:"invitation-management"},$={class:"invitation-header"},j=B({__name:"SettingsView",setup(q){const r=u([]),c=u(!1),_=u(!1),w=async()=>{c.value=!0;try{const e=await E();r.value=e}catch(e){console.error("获取邀请码列表失败:",e),i.error("获取邀请码列表失败")}finally{c.value=!1}},b=async()=>{_.value=!0;try{const e=await M();i.success("邀请码生成成功"),r.value.unshift(e)}catch(e){console.error("生成邀请码失败:",e),i.error("生成邀请码失败")}finally{_.value=!1}},h=e=>{navigator.clipboard.writeText(e).then(()=>{i.success("邀请码已复制到剪贴板")}).catch(()=>{i.error("复制失败，请手动复制")})};return D(()=>{w()}),(e,n)=>{const f=l("el-button"),C=l("el-empty"),s=l("el-table-column"),k=l("el-tag"),I=l("el-table"),x=l("el-card"),V=S("loading");return d(),m("div",H,[t(x,null,{header:a(()=>[v("div",$,[n[1]||(n[1]=v("span",null,"邀请码管理",-1)),t(f,{type:"primary",onClick:b,loading:_.value},{default:a(()=>[...n[0]||(n[0]=[p(" 生成邀请码 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[N((d(),m("div",null,[r.value.length===0?(d(),y(C,{key:0,description:"暂无邀请码"})):(d(),y(I,{key:1,data:r.value,style:{width:"100%"}},{default:a(()=>[t(s,{prop:"code",label:"邀请码",width:"180"}),t(s,{label:"状态",width:"120"},{default:a(o=>[t(k,{type:o.row.is_used?"info":"success"},{default:a(()=>[p(g(o.row.is_used?"已使用":"未使用"),1)]),_:2},1032,["type"])]),_:1}),t(s,{label:"使用者",width:"150"},{default:a(o=>[v("span",null,g(o.row.used_by||"-"),1)]),_:1}),t(s,{prop:"created_at",label:"创建时间",width:"180"}),t(s,{prop:"expires_at",label:"过期时间",width:"180"}),t(s,{label:"操作"},{default:a(o=>[t(f,{type:"primary",link:"",onClick:z=>h(o.row.code),disabled:o.row.is_used},{default:a(()=>[...n[2]||(n[2]=[p(" 复制 ",-1)])]),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"]))])),[[V,c.value]])]),_:1})])}}}),F=T(j,[["__scopeId","data-v-f1e2d440"]]);export{F as default};
