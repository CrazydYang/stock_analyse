import{a as _,x as $,d as j,y as H,z as O,c as i,e as c,w as o,i as d,b as e,F as k,A as w,f as D,g as R,k as z,t as r,l as U,u as q,o as l,B as L,C as G,_ as J}from"./index-Ab9sP7mr.js";const K=_([{id:6,date:"2025-08-23",version:"0.01",title:"搭建股票分析平台前后端",description:"使用ai快速实现股票分析平台前后端，可以查看一些简单数据, 增加新闻ai分析能力、行业热力图数据、行业rps数据",type:"guide",status:"info"},{id:1,date:"2025-09-14",version:"0.02",title:"增加若干功能",description:"增加了用户注册、登录功能，回测功能模块、行业模块、个股模块、基本面模块",type:"update",status:"stable"},{id:2,date:"2025-09-27",version:"0.03",title:"增加策略选股功能",description:"该功能主要是用来存储展示不同策略的定期结果产出，可以对策略的不同结果均可存储展示，如果日常使用jupyter notebook也可使用接口存储到平台",type:"update",status:"stable"},{id:2,date:"2025-09-28",version:"0.04",title:"修复若干问题",description:"所有股票数据都清洗为前复权（数据抓取模块修复），k线展示异常修复，回测初始资金默认1000000",type:"update",status:"info"},{id:4,date:"2025-09-29",version:"0.05",title:"优化量化模块子页面名称，增加布林带量化策略",description:"本来计划是每次回测都搞个可视化趋势图，使用backtrade自带的搞了一下午没搞成功，准备尝试其他方案了",type:"update",status:"info"}]),Q=_([{id:1,title:"暂无数据",summary:"暂时没有数据",time:"2小时前"}]),x=async a=>{try{const u="/django/api/market/sse-daily-overview/",v=a?{date:a}:{};return(await $.get(u,{params:v})).data}catch(u){return console.error("获取股票市场每日概况数据失败:",u),{date:"",shanghai:m("上证指数","000001"),shenzhen:m("深证成指","399001"),hs300:m("沪深300","000300"),sz50:m("上证50","000016")}}},m=(a,u)=>({index_name:a,index_code:u,latest_value:0,change_percent:0,volume:0}),W=async()=>{try{const a=await x();return[{name:a.shanghai.index_name,value:a.shanghai.latest_value,change:0,changePercent:a.shanghai.change_percent},{name:a.shenzhen.index_name,value:a.shenzhen.latest_value,change:0,changePercent:a.shenzhen.change_percent},{name:a.hs300.index_name,value:a.hs300.latest_value,change:0,changePercent:a.hs300.change_percent},{name:a.sz50.index_name,value:a.sz50.latest_value,change:0,changePercent:a.sz50.change_percent}]}catch(a){return console.error("获取市场指数变化数据失败:",a),[]}},X={class:"home"},Y={class:"welcome-content"},Z={class:"feature-updates-list"},S={class:"update-header"},ee={class:"update-meta"},te={class:"update-date"},se={class:"update-content"},ae={class:"update-title"},ne={class:"update-description"},oe={class:"card-header"},re={key:0,class:"loading-container"},le={key:1,class:"error-message"},ce={key:2,class:"stats-content"},ie={class:"stat-label"},ue={class:"stat-value-container"},de={class:"stat-value-number"},_e={class:"news-list"},pe={class:"news-time"},he=j({__name:"HomeView",setup(a){q();const u=_([]),v=_([]),p=_(""),g=_(!0),h=_(null),C=async()=>{g.value=!0,h.value=null;try{const t=await W();u.value=t;const n=await x();n.date&&(p.value=n.date,v.value=[n.shanghai,n.shenzhen,n.hs300,n.sz50])}catch(t){console.error("获取市场数据出错:",t),h.value="获取市场数据出错，请稍后重试"}finally{g.value=!1}},T=t=>!t||t.length!==8?t:`${t.substring(0,4)}-${t.substring(4,6)}-${t.substring(6,8)}`;H(()=>{C()});const F=O(()=>[...K.value].sort((t,n)=>new Date(n.date).getTime()-new Date(t.date).getTime())),P=t=>{switch(t){case"latest":return"danger";case"stable":return"success";default:return"info"}},I=t=>{switch(t){case"latest":return"最新";case"stable":return"稳定";default:return"普通"}},V=t=>{switch(t){case"feature":return"Plus";case"update":return"Refresh";case"tool":return"Tools";case"guide":return"Document";default:return"InfoFilled"}},B=t=>{switch(t){case"feature":return"#67C23A";case"update":return"#409EFF";case"tool":return"#E6A23C";case"guide":return"#909399";default:return"#909399"}};return(t,n)=>{const f=d("el-tag"),M=d("el-icon"),y=d("el-card"),b=d("el-col"),N=d("el-skeleton"),E=d("el-alert"),A=d("el-row");return l(),i("div",X,[c(A,{gutter:20},{default:o(()=>[c(b,{span:16},{default:o(()=>[c(y,{class:"welcome-card"},{header:o(()=>[...n[0]||(n[0]=[e("span",null,"欢迎使用股票分析系统",-1)])]),default:o(()=>[e("div",Y,[n[1]||(n[1]=e("h2",null,"平台功能迭代",-1)),n[2]||(n[2]=e("p",null,"查看平台最新的功能更新和版本发布历史，了解系统的持续改进和优化。",-1)),e("div",Z,[(l(!0),i(k,null,w(F.value,s=>(l(),i("div",{key:s.id,class:"update-item"},[e("div",S,[e("div",ee,[e("span",te,r(s.date),1),c(f,{size:"small",type:"info",class:"version-tag"},{default:o(()=>[z(r(s.version),1)]),_:2},1024),c(f,{size:"small",type:P(s.status),class:"status-tag"},{default:o(()=>[z(r(I(s.status)),1)]),_:2},1032,["type"])]),c(M,{size:20,color:B(s.type),class:"type-icon"},{default:o(()=>[(l(),D(L(V(s.type))))]),_:2},1032,["color"])]),e("div",se,[e("h3",ae,r(s.title),1),e("p",ne,r(s.description),1)])]))),128))])])]),_:1})]),_:1}),c(b,{span:8},{default:o(()=>[c(y,{class:"quick-stats"},{header:o(()=>[e("div",oe,[n[3]||(n[3]=e("span",null,"今日行情",-1)),p.value?(l(),D(f,{key:0,size:"small",type:"info"},{default:o(()=>[z(r(T(p.value)),1)]),_:1})):R("",!0)])]),default:o(()=>[g.value?(l(),i("div",re,[c(N,{rows:4,animated:""})])):h.value?(l(),i("div",le,[c(E,{type:"error",title:h.value,closable:!1},null,8,["title"])])):(l(),i("div",ce,[(l(!0),i(k,null,w(u.value,s=>(l(),i("div",{key:s.name,class:"stat-item"},[e("span",ie,r(s.name),1),e("div",ue,[e("span",de,r(s.value.toFixed(2)),1),e("span",{class:G(["stat-value",s.changePercent>=0?"positive":"negative"])},r(s.changePercent>=0?"+":"")+r(s.changePercent.toFixed(2))+"% ",3)])]))),128))]))]),_:1}),c(y,{class:"recent-news mt-20"},{header:o(()=>[...n[4]||(n[4]=[e("span",null,"最新资讯",-1)])]),default:o(()=>[e("div",_e,[(l(!0),i(k,null,w(U(Q),s=>(l(),i("div",{key:s.id,class:"news-item"},[e("h4",null,r(s.title),1),e("p",null,r(s.summary),1),e("span",pe,r(s.time),1)]))),128))])]),_:1})]),_:1})]),_:1})])}}}),ve=J(he,[["__scopeId","data-v-f083a73c"]]);export{ve as default};
