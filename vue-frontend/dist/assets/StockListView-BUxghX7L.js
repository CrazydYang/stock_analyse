import{d as j,a as i,C as H,D as J,c as O,e as t,w as a,i as d,E as z,b as m,l as k,K as T,k as p,L as q,I as G,J as Q,f as W,t as V,M as X,u as Y,o as B,_ as Z}from"./index-DXmEjQ3L.js";import{g as ee}from"./individualStockApi-BI55jImW.js";const te={class:"stock-list-view"},oe={class:"header-content"},ae={class:"header-actions"},le={class:"search-section"},ne={class:"table-container"},se={class:"pagination-container"},re=j({__name:"StockListView",setup(ie){const y=Y(),f=i(!1),C=i([]),v=i(""),g=i(""),b=i("asc"),c=i(1),w=i(10),S=i(0),F=H(()=>{let e=C.value;return g.value&&(e=[...e].sort((o,u)=>{const r=o[g.value],s=u[g.value];if(typeof r=="string"&&typeof s=="string")return b.value==="asc"?r.localeCompare(s):s.localeCompare(r);{const h=r==null?-1/0:Number(r),l=s==null?-1/0:Number(s);return b.value==="asc"?h-l:l-h}})),e}),_=async()=>{f.value=!0;try{const e=await ee({page:c.value,page_size:w.value,keyword:v.value});C.value=e.data,S.value=e.total,z.success("股票数据加载成功")}catch(e){console.error("获取股票列表失败:",e),z.error("获取股票列表失败，请稍后重试")}finally{f.value=!1}},x=()=>{c.value=1,_()},L=()=>{v.value="",c.value=1,_()},N=({prop:e,order:o})=>{g.value=e||"",b.value=o==="ascending"?"asc":"desc"},D=e=>{w.value=e,c.value=1,_()},I=e=>{c.value=e,_()},M=e=>{y.push(`/stock-realtime/${e}`)},$=e=>{y.push(`/stock-history/${e}`)},E=e=>e==null?"-":e>=1e11?(e/1e11).toFixed(2)+"千亿":e>=1e8?(e/1e8).toFixed(2)+"亿":e>=1e4?(e/1e4).toFixed(2)+"万":e.toString();return J(()=>{_()}),(e,o)=>{const u=d("el-button"),r=d("el-input"),s=d("el-form-item"),h=d("el-form"),l=d("el-table-column"),A=d("el-table"),K=d("el-pagination"),P=d("el-card"),R=Q("loading");return B(),O("div",te,[t(P,{class:"page-header"},{header:a(()=>[m("div",oe,[o[3]||(o[3]=m("h2",null,"股票列表",-1)),m("div",ae,[t(u,{type:"primary",icon:k(X),onClick:_,loading:f.value},{default:a(()=>[...o[2]||(o[2]=[p(" 刷新数据 ",-1)])]),_:1},8,["icon","loading"])])])]),default:a(()=>[m("div",le,[t(h,{inline:!0,class:"search-form"},{default:a(()=>[t(s,{label:"股票代码/名称"},{default:a(()=>[t(r,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=n=>v.value=n),placeholder:"请输入股票代码或名称",clearable:"",onClear:x},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(u,{type:"primary",icon:k(T),onClick:x},{default:a(()=>[...o[4]||(o[4]=[p("搜索",-1)])]),_:1},8,["icon"]),t(u,{icon:k(q),onClick:L},{default:a(()=>[...o[5]||(o[5]=[p("重置",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),m("div",ne,[G((B(),W(A,{data:F.value,border:"",stripe:"",style:{width:"100%"},onSortChange:N,fit:""},{default:a(()=>[t(l,{prop:"code",label:"股票代码","min-width":"100",sortable:""}),t(l,{prop:"name",label:"股票名称","min-width":"120",sortable:""}),t(l,{prop:"exchange",label:"交易所","min-width":"80"}),t(l,{prop:"industry",label:"行业","min-width":"120"}),t(l,{prop:"market_cap",label:"市值","min-width":"100",sortable:""},{default:a(n=>[p(V(E(n.row.market_cap)),1)]),_:1}),t(l,{prop:"pe_ratio",label:"市盈率","min-width":"80",sortable:""}),t(l,{prop:"pb_ratio",label:"市净率","min-width":"80",sortable:""}),t(l,{prop:"dividend_yield",label:"股息率","min-width":"80",sortable:""},{default:a(n=>[p(V(n.row.dividend_yield?n.row.dividend_yield.toFixed(2)+"%":"-"),1)]),_:1}),t(l,{prop:"listing_date",label:"上市日期","min-width":"100",sortable:""}),t(l,{label:"操作","min-width":"180",fixed:"right"},{default:a(n=>[t(u,{type:"primary",size:"small",onClick:U=>M(n.row.code)},{default:a(()=>[...o[6]||(o[6]=[p(" 实时行情 ",-1)])]),_:2},1032,["onClick"]),t(u,{type:"info",size:"small",onClick:U=>$(n.row.code)},{default:a(()=>[...o[7]||(o[7]=[p(" 历史行情 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,f.value]])]),m("div",se,[t(K,{"current-page":c.value,"onUpdate:currentPage":o[1]||(o[1]=n=>c.value=n),"page-size":w.value,total:S.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:D,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),_:1})])}}}),ue=Z(re,[["__scopeId","data-v-b2603ade"]]);export{ue as default};
