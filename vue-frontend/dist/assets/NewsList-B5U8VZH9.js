import{d as I,a as s,y as K,c as C,e as a,w as n,i as l,E as k,b as i,J as M,K as P,f as h,g as T,k as v,t as j,l as J,N as R,u as q,o as c,_ as A}from"./index-k7wOp3mq.js";import{g as F}from"./newsApi-CA6IHSk-.js";const G={class:"news-list"},H={class:"card-header"},O={class:"header-actions"},Q={class:"news-content"},W={class:"list-header"},X={key:2,class:"pagination-container"},Y=I({__name:"NewsList",setup(Z){const b=q(),f=s(""),g=s([]),p=s(!1),m=s(0),r=s(1),u=s(10);async function d(){p.value=!0;try{const t=await F(u.value,(r.value-1)*u.value,f.value||void 0);console.log(t),t?(g.value=t.news,m.value=t.total):k.error(`获取新闻列表失败: ${t}`)}catch(t){console.error("获取新闻列表失败:",t),k.error("获取新闻列表失败，请检查网络连接")}finally{p.value=!1}}function N(){r.value=1,d()}function x(){d()}function z(t){b.push(`/analysis/news-detail/${t}`)}function V(t){u.value=t,d()}function L(t){r.value=t,d()}return K(()=>{d()}),(t,e)=>{const D=l("el-input"),w=l("el-button"),_=l("el-table-column"),S=l("router-link"),B=l("el-table"),$=l("el-empty"),E=l("el-pagination"),y=l("el-card"),U=P("loading");return c(),C("div",G,[a(y,{class:"page-header"},{header:n(()=>[i("div",H,[e[4]||(e[4]=i("span",null,"CCTV新闻列表",-1)),i("div",O,[a(D,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),placeholder:"输入关键词搜索",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),a(w,{type:"primary",onClick:N},{default:n(()=>[...e[3]||(e[3]=[v("搜索",-1)])]),_:1})])])]),default:n(()=>[i("div",Q,[M((c(),h(y,{shadow:"hover","element-loading-text":"正在加载新闻数据..."},{header:n(()=>[i("div",W,[e[6]||(e[6]=i("h3",null,"新闻列表",-1)),a(w,{type:"primary",onClick:x,icon:J(R),loading:p.value},{default:n(()=>[...e[5]||(e[5]=[v("刷新",-1)])]),_:1},8,["icon","loading"])])]),default:n(()=>[g.value.length>0?(c(),h(B,{key:0,data:g.value,style:{width:"100%"}},{default:n(()=>[a(_,{prop:"id",label:"ID",width:"80"}),a(_,{prop:"title",label:"标题"},{default:n(o=>[a(S,{to:`/analysis/news-detail/${o.row.id}`,class:"news-title-link"},{default:n(()=>[v(j(o.row.title),1)]),_:2},1032,["to"])]),_:1}),a(_,{prop:"publish_date",label:"发布日期",width:"120"}),a(_,{label:"操作",width:"120"},{default:n(o=>[a(w,{type:"text",onClick:ee=>z(o.row.id)},{default:n(()=>[...e[7]||(e[7]=[v(" 查看详情 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(c(),h($,{key:1,description:"暂无新闻数据"})),m.value>0?(c(),C("div",X,[a(E,{"current-page":r.value,"onUpdate:currentPage":e[1]||(e[1]=o=>r.value=o),"page-size":u.value,"onUpdate:pageSize":e[2]||(e[2]=o=>u.value=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:m.value,onSizeChange:V,onCurrentChange:L},null,8,["current-page","page-size","total"])])):T("",!0)]),_:1})),[[U,p.value]])])]),_:1})])}}}),ne=A(Y,[["__scopeId","data-v-42f88624"]]);export{ne as default};
