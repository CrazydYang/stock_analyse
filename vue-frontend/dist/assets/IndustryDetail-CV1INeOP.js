import{d as I,a as h,z as R,y as A,c as m,b as a,e as l,w as s,i as v,t as n,u as B,j as S,k as Y,C as _,o as f,_ as V}from"./index-1owQczTB.js";import{f as E}from"./industryApi-D9CoC7aw.js";const z={class:"industry-detail"},$={class:"page-header"},j={class:"header-content"},q={class:"page-title"},H={key:0,class:"detail-content"},M={class:"stats-section"},O={class:"stat-value"},T={class:"stat-value"},U={class:"stat-value"},G={class:"stat-value"},J={class:"stat-value"},K={class:"stock-list-section"},L={class:"section-header"},Q={class:"stock-count"},W={class:"table-container"},X=["href"],Z={class:"stock-name"},aa={class:"market-cap"},ta={class:"price"},ea={class:"ratio"},sa={class:"ratio"},la={key:1,class:"error-container"},oa=I({__name:"IndustryDetail",setup(na){const C=S(),k=B(),p=h(!0),t=h(null),b=h(""),w=h("desc"),x=R(()=>!t.value||!b.value?t.value?.stocks||[]:[...t.value.stocks].sort((i,e)=>{const g=b.value;let r=i[g],d=e[g];return r==null&&(r=-1/0),d==null&&(d=-1/0),typeof r=="string"&&typeof d=="string"?w.value==="asc"?r.localeCompare(d):d.localeCompare(r):w.value==="asc"?r-d:d-r})),u=i=>i==null?"N/A":`${i.toFixed(2)}%`,P=i=>(i*.1).toFixed(2),y=()=>{k.push("/industries")},D=async()=>{try{p.value=!0;const i=decodeURIComponent(C.params.industry);if(console.log("industryName",i),!i)throw new Error("未指定行业名称");const e=await E(i);if(e)t.value=e;else throw new Error("未找到行业数据")}catch(i){console.error("获取行业数据失败:",i),t.value=null}finally{p.value=!1}};return A(()=>{D()}),(i,e)=>{const g=v("el-button"),r=v("el-card"),d=v("el-col"),N=v("el-row"),c=v("el-table-column"),F=v("el-table");return f(),m("div",z,[a("div",$,[a("div",j,[l(g,{type:"default",size:"default",onClick:y,class:"back-button"},{icon:s(()=>[...e[0]||(e[0]=[a("span",null,"←",-1)])]),default:s(()=>[e[1]||(e[1]=Y(" 返回行业分析 ",-1))]),_:1}),a("h1",q,n(t.value?.industry)+" - 行业详情",1)])]),t.value?(f(),m("div",H,[a("div",M,[l(N,{gutter:20,class:"stats-grid"},{default:s(()=>[l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[2]||(e[2]=a("div",{class:"stat-label"},"行业名称",-1)),a("div",O,n(t.value.industry),1)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[3]||(e[3]=a("div",{class:"stat-label"},"股票总数",-1)),a("div",T,n(t.value.count)+"只",1)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[4]||(e[4]=a("div",{class:"stat-label"},"市场占比",-1)),a("div",U,n(P(t.value.count||0))+"%",1)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[5]||(e[5]=a("div",{class:"stat-label"},"平均涨跌幅",-1)),a("div",{class:_(["stat-value",{positive:t.value.avgChangePercent&&t.value.avgChangePercent>0,negative:t.value.avgChangePercent&&t.value.avgChangePercent<0,neutral:t.value.avgChangePercent===0}])},n(u(t.value.avgChangePercent||0)),3)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[6]||(e[6]=a("div",{class:"stat-label"},"平均PE",-1)),a("div",G,n(t.value.avgPeRatio?t.value.avgPeRatio.toFixed(2):"N/A"),1)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[7]||(e[7]=a("div",{class:"stat-label"},"平均PB",-1)),a("div",J,n(t.value.avgPbRatio?t.value.avgPbRatio.toFixed(2):"N/A"),1)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[8]||(e[8]=a("div",{class:"stat-label"},"60天涨跌幅",-1)),a("div",{class:_(["stat-value",{positive:t.value.avgChange60Day&&t.value.avgChange60Day>0,negative:t.value.avgChange60Day&&t.value.avgChange60Day<0,neutral:t.value.avgChange60Day===0}])},n(u(t.value.avgChange60Day||0)),3)]),_:1})]),_:1}),l(d,{xs:12,sm:6,md:6,lg:6},{default:s(()=>[l(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[e[9]||(e[9]=a("div",{class:"stat-label"},"年初至今涨跌幅",-1)),a("div",{class:_(["stat-value",{positive:t.value.avgChangeYtd&&t.value.avgChangeYtd>0,negative:t.value.avgChangeYtd&&t.value.avgChangeYtd<0,neutral:t.value.avgChangeYtd===0}])},n(u(t.value.avgChangeYtd||0)),3)]),_:1})]),_:1})]),_:1})]),a("div",K,[a("div",L,[e[10]||(e[10]=a("h2",null,"股票列表",-1)),a("div",Q,"共 "+n(t.value.stocks?.length||0)+" 只股票",1)]),a("div",W,[l(F,{data:x.value,style:{width:"100%"},stripe:"",border:"",loading:p.value,"empty-text":"暂无股票数据"},{default:s(()=>[l(c,{prop:"code",label:"股票代码","min-width":"100",sortable:""},{default:s(o=>[a("a",{href:`https://xueqiu.com/S/SH${o.row.code}`,target:"_blank",class:"stock-code stock-link"},n(o.row.code),9,X)]),_:1}),l(c,{prop:"name",label:"股票名称","min-width":"120",sortable:""},{default:s(o=>[a("span",Z,n(o.row.name),1)]),_:1}),l(c,{prop:"total_market_cap",label:"总市值","min-width":"100",align:"center",sortable:""},{default:s(o=>[a("span",aa,n(o.row.total_market_cap?.toFixed(2)),1)]),_:1}),l(c,{prop:"latest_price",label:"最新价格","min-width":"80",align:"center",sortable:""},{default:s(o=>[a("span",ta,n(o.row.latest_price?.toFixed(2)||"N/A"),1)]),_:1}),l(c,{prop:"change_percent",label:"涨跌幅","min-width":"80",align:"center",sortable:""},{default:s(o=>[a("span",{class:_(["change-value",{positive:o.row.change_percent>0,negative:o.row.change_percent<0,neutral:o.row.change_percent===0}])},n(u(o.row.change_percent)),3)]),_:1}),l(c,{prop:"pe_ratio",label:"市盈率","min-width":"70",align:"center",sortable:""},{default:s(o=>[a("span",ea,n(o.row.pe_ratio?.toFixed(2)||"N/A"),1)]),_:1}),l(c,{prop:"pb_ratio",label:"市净率","min-width":"70",align:"center",sortable:""},{default:s(o=>[a("span",sa,n(o.row.pb_ratio?.toFixed(2)||"N/A"),1)]),_:1}),l(c,{prop:"change_60day",label:"60天涨跌","min-width":"80",align:"center",sortable:""},{default:s(o=>[a("span",{class:_(["change-value",{positive:o.row.change_60day>0,negative:o.row.change_60day<0,neutral:o.row.change_60day===0}])},n(u(o.row.change_60day)),3)]),_:1}),l(c,{prop:"change_ytd",label:"年初至今","min-width":"80",align:"center",sortable:""},{default:s(o=>[a("span",{class:_(["change-value",{positive:o.row.change_ytd>0,negative:o.row.change_ytd<0,neutral:o.row.change_ytd===0}])},n(u(o.row.change_ytd)),3)]),_:1})]),_:1},8,["data","loading"])])])])):(f(),m("div",la,[e[11]||(e[11]=a("div",{class:"error-message"},"未找到行业数据",-1)),a("button",{class:"retry-button",onClick:y},"返回行业分析")]))])}}}),ia=V(oa,[["__scopeId","data-v-ab3ec410"]]);export{ia as default};
