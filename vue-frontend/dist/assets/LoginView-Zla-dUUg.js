import{d as M,r as N,a as m,c as U,b as l,e as o,f as q,g as E,w as s,h as F,i as r,u as R,j as $,o as v,k as u,l as P,m as j,n as I,E as w,p as S,_ as T}from"./index-BXcHrunV.js";const h={class:"login-container"},z={class:"login-card"},A={class:"login-options"},D={class:"login-footer"},G=M({__name:"LoginView",setup(H){const b=R(),V=$(),t=N({username:"",password:""}),k={username:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"},{min:3,message:"用户名长度不能少于3个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码长度不能少于8个字符",trigger:"blur"}]},p=m(!1),a=m(""),c=m();async function g(){try{a.value="",await c.value.validate(),await I(t.username,t.password),w.success("登录成功");const i=V.query.redirect||"/";b.push(i)}catch(i){console.error("登录过程中发生错误:",i),a.value=S.value||i.message||"登录失败，请检查您的凭据"}}function x(){w.info("忘记密码功能暂未实现，请联系管理员")}return(i,e)=>{const _=r("el-input"),d=r("el-form-item"),y=r("el-checkbox"),f=r("el-button"),C=r("router-link"),L=r("el-form"),B=r("el-alert");return v(),U("div",h,[l("div",z,[e[9]||(e[9]=l("div",{class:"login-header"},[l("h2",null,"登录"),l("p",null,"欢迎回来，请登录您的账号")],-1)),o(L,{ref_key:"loginForm$",ref:c,model:t,rules:k,"label-position":"top",onSubmit:F(g,["prevent"])},{default:s(()=>[o(d,{label:"用户名/邮箱",prop:"username"},{default:s(()=>[o(_,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=n=>t.username=n),placeholder:"请输入用户名或邮箱","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(d,{label:"密码",prop:"password"},{default:s(()=>[o(_,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.password=n),placeholder:"请输入密码",type:"password","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),l("div",A,[o(y,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=n=>p.value=n)},{default:s(()=>[...e[4]||(e[4]=[u("记住我",-1)])]),_:1},8,["modelValue"]),o(f,{type:"text",onClick:x},{default:s(()=>[...e[5]||(e[5]=[u("忘记密码？",-1)])]),_:1})]),o(d,null,{default:s(()=>[o(f,{type:"primary",onClick:g,loading:P(j),class:"login-button"},{default:s(()=>[...e[6]||(e[6]=[u(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),l("div",D,[l("p",null,[e[8]||(e[8]=u("还没有账号？",-1)),o(C,{to:"/register"},{default:s(()=>[...e[7]||(e[7]=[u("立即注册",-1)])]),_:1})])])]),_:1},8,["model"]),a.value?(v(),q(B,{key:0,title:a.value,type:"error","show-icon":"",closable:!0,onClose:e[3]||(e[3]=n=>a.value="")},null,8,["title"])):E("",!0)])])}}}),K=T(G,[["__scopeId","data-v-0a88c637"]]);export{K as default};
