import{x as O,d as $,a as p,y as H,c as u,e as t,w as a,i as _,b as s,l as g,z as j,A as q,B as G,C as K,F as x,D,f as L,g as R,k as J,t as i,u as Q,o as c,G as U,_ as W}from"./index-B66z1j89.js";const b=async n=>{try{const r="/django/api/market/sse-daily-overview/",v=n?{date:n}:{};return(await O.get(r,{params:v})).data}catch(r){return console.error("获取股票市场每日概况数据失败:",r),{date:"",shanghai:k("上证指数","000001"),shenzhen:k("深证成指","399001"),hs300:k("沪深300","000300"),sz50:k("上证50","000016")}}},k=(n,r)=>({index_name:n,index_code:r,latest_value:0,change_percent:0,volume:0}),X=async()=>{try{const n=await b();return[{name:n.shanghai.index_name,value:n.shanghai.latest_value,change:0,changePercent:n.shanghai.change_percent},{name:n.shenzhen.index_name,value:n.shenzhen.latest_value,change:0,changePercent:n.shenzhen.change_percent},{name:n.hs300.index_name,value:n.hs300.latest_value,change:0,changePercent:n.hs300.change_percent},{name:n.sz50.index_name,value:n.sz50.latest_value,change:0,changePercent:n.sz50.change_percent}]}catch(n){return console.error("获取市场指数变化数据失败:",n),[]}},Y={class:"home"},Z={class:"welcome-content"},S={class:"card-header"},ee={key:0,class:"loading-container"},te={key:1,class:"error-message"},ae={key:2,class:"stats-content"},se={class:"stat-label"},ne={class:"stat-value-container"},le={class:"stat-value-number"},oe={class:"news-list"},re={class:"news-time"},ce=$({__name:"HomeView",setup(n){const r=Q(),v=p([]),z=p([]),y=p(""),w=p(!0),h=p(null),P=async()=>{w.value=!0,h.value=null;try{const l=await X();v.value=l;const e=await b();e.date&&(y.value=e.date,z.value=[e.shanghai,e.shenzhen,e.hs300,e.sz50])}catch(l){console.error("获取市场数据出错:",l),h.value="获取市场数据出错，请稍后重试"}finally{w.value=!1}},F=l=>!l||l.length!==8?l:`${l.substring(0,4)}-${l.substring(4,6)}-${l.substring(6,8)}`,A=p([{id:1,title:"央行宣布降准0.5个百分点",summary:"央行今日宣布下调金融机构存款准备金率0.5个百分点，释放长期资金约1万亿元。",time:"2小时前"},{id:2,title:"A股成交额突破万亿",summary:"今日A股市场成交额突破1万亿元，创近期新高，市场情绪明显回暖。",time:"3小时前"},{id:3,title:"科技股集体上涨",summary:"半导体、人工智能等科技板块今日集体上涨，多股涨停。",time:"4小时前"}]),M=()=>{r.push("/stock-picker")},V=()=>{r.push("/analysis/technical")},B=()=>{r.push("/analysis/fundamental")},N=()=>{r.push("/market-overview")};return H(()=>{P()}),(l,e)=>{const f=_("el-icon"),d=_("el-card"),m=_("el-col"),C=_("el-row"),T=_("el-tag"),E=_("el-skeleton"),I=_("el-alert");return c(),u("div",Y,[t(C,{gutter:20},{default:a(()=>[t(m,{span:16},{default:a(()=>[t(d,{class:"welcome-card"},{header:a(()=>[...e[0]||(e[0]=[s("span",null,"欢迎使用股票分析系统",-1)])]),default:a(()=>[s("div",Z,[e[9]||(e[9]=s("h2",null,"欢迎来到股票分析系统",-1)),e[10]||(e[10]=s("p",null,"这是一个专业的股票分析平台，提供技术分析、基本面分析和投资组合管理功能。",-1)),t(C,{gutter:20,class:"feature-cards"},{default:a(()=>[t(m,{span:8},{default:a(()=>[t(d,{class:"feature-card",onClick:M},{default:a(()=>[t(f,{size:"48",color:"#722ed1"},{default:a(()=>[t(g(j))]),_:1}),e[1]||(e[1]=s("h3",null,"智能选股",-1)),e[2]||(e[2]=s("p",null,"基于市场数据的智能股票筛选",-1))]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(d,{class:"feature-card",onClick:V},{default:a(()=>[t(f,{size:"48",color:"#409EFF"},{default:a(()=>[t(g(q))]),_:1}),e[3]||(e[3]=s("h3",null,"技术分析",-1)),e[4]||(e[4]=s("p",null,"K线图表与技术指标分析",-1))]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(d,{class:"feature-card",onClick:B},{default:a(()=>[t(f,{size:"48",color:"#67C23A"},{default:a(()=>[t(g(G))]),_:1}),e[5]||(e[5]=s("h3",null,"基本面分析",-1)),e[6]||(e[6]=s("p",null,"财务报表与估值分析",-1))]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(d,{class:"feature-card",onClick:N},{default:a(()=>[t(f,{size:"48",color:"#E6A23C"},{default:a(()=>[t(g(K))]),_:1}),e[7]||(e[7]=s("h3",null,"市场概况",-1)),e[8]||(e[8]=s("p",null,"大盘数据与市场趋势分析",-1))]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(m,{span:8},{default:a(()=>[t(d,{class:"quick-stats"},{header:a(()=>[s("div",S,[e[11]||(e[11]=s("span",null,"今日行情",-1)),y.value?(c(),L(T,{key:0,size:"small",type:"info"},{default:a(()=>[J(i(F(y.value)),1)]),_:1})):R("",!0)])]),default:a(()=>[w.value?(c(),u("div",ee,[t(E,{rows:4,animated:""})])):h.value?(c(),u("div",te,[t(I,{type:"error",title:h.value,closable:!1},null,8,["title"])])):(c(),u("div",ae,[(c(!0),u(x,null,D(v.value,o=>(c(),u("div",{key:o.name,class:"stat-item"},[s("span",se,i(o.name),1),s("div",ne,[s("span",le,i(o.value.toFixed(2)),1),s("span",{class:U(["stat-value",o.changePercent>=0?"positive":"negative"])},i(o.changePercent>=0?"+":"")+i(o.changePercent.toFixed(2))+"% ",3)])]))),128))]))]),_:1}),t(d,{class:"recent-news mt-20"},{header:a(()=>[...e[12]||(e[12]=[s("span",null,"最新资讯",-1)])]),default:a(()=>[s("div",oe,[(c(!0),u(x,null,D(A.value,o=>(c(),u("div",{key:o.id,class:"news-item"},[s("h4",null,i(o.title),1),s("p",null,i(o.summary),1),s("span",re,i(o.time),1)]))),128))])]),_:1})]),_:1})]),_:1})])}}}),ie=W(ce,[["__scopeId","data-v-6bb830f7"]]);export{ie as default};
